<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send a Vibe Check ‚ú® - The Vibe Check Project</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
    <style>
        .send-card-page {
            min-height: 100vh;
            background: var(--color-bg-dark);
            padding: var(--space-2xl) var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-card-container {
            max-width: 700px;
            width: 100%;
            background: var(--color-bg-medium);
            border-radius: 24px;
            padding: var(--space-2xl);
            border: 2px solid rgba(255, 107, 157, 0.2);
            box-shadow: var(--shadow-xl);
        }

        .send-card-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
        }

        .send-card-title {
            font-family: var(--font-display);
            font-size: 36px;
            margin-bottom: var(--space-sm);
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .send-card-subtitle {
            color: var(--color-text-secondary);
            font-size: 16px;
        }

        .card-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .form-section {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .form-label {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 16px 20px;
            font-size: 16px;
            font-family: var(--font-body);
            background: var(--color-bg-dark);
            border: 2px solid rgba(255, 107, 157, 0.2);
            border-radius: 12px;
            color: var(--color-text-primary);
            transition: all var(--transition-base);
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .affirmation-picker {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: var(--space-sm);
        }

        .affirmation-option {
            padding: var(--space-md);
            background: var(--color-bg-dark);
            border: 2px solid rgba(255, 107, 157, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-base);
            text-align: center;
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .affirmation-option:hover {
            border-color: var(--color-primary);
            background: rgba(255, 107, 157, 0.1);
        }

        .affirmation-option.selected {
            border-color: var(--color-primary);
            background: rgba(255, 107, 157, 0.2);
            color: var(--color-text-primary);
        }

        .card-preview {
            background: var(--color-bg-dark);
            border-radius: 16px;
            padding: var(--space-xl);
            border: 2px solid rgba(255, 107, 157, 0.2);
            text-align: center;
        }

        .preview-label {
            font-size: 12px;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-md);
        }

        .preview-affirmation {
            font-size: 24px;
            font-style: italic;
            color: var(--color-text-primary);
            margin-bottom: var(--space-md);
        }

        .preview-message {
            font-size: 16px;
            color: var(--color-text-secondary);
            line-height: 1.6;
        }

        .send-button {
            width: 100%;
            padding: 20px;
            font-size: 18px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: var(--font-display);
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(255, 107, 157, 0.3);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .back-link {
            text-align: center;
            margin-top: var(--space-lg);
        }

        .back-link a {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 500;
        }

        .back-link a:hover {
            text-decoration: underline;
        }

        .success-message {
            display: none;
            text-align: center;
            padding: var(--space-2xl);
        }

        .success-message.show {
            display: block;
        }

        .success-icon {
            font-size: 64px;
            margin-bottom: var(--space-md);
        }

        .success-title {
            font-family: var(--font-display);
            font-size: 32px;
            color: var(--color-primary);
            margin-bottom: var(--space-md);
        }

        .success-text {
            color: var(--color-text-secondary);
            margin-bottom: var(--space-lg);
        }

        .share-link {
            background: var(--color-bg-dark);
            padding: var(--space-md);
            border-radius: 12px;
            margin: var(--space-lg) 0;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .share-link input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--color-text-primary);
            font-size: 14px;
        }

        .copy-button {
            padding: 8px 16px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="send-card-page">
        <div class="send-card-container">
            <div class="send-card-header">
                <h1 class="send-card-title">‚ú® Send a Vibe Check</h1>
                <p class="send-card-subtitle">Send someone you care about a personalized affirmation card</p>
            </div>

            <form class="card-form" id="cardForm">
                <div class="form-section">
                    <label class="form-label">Choose an Affirmation</label>
                    <div class="affirmation-picker" id="affirmationPicker">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <div class="form-section">
                    <label class="form-label">Recipient's Name</label>
                    <input type="text" class="form-input" id="recipientName" placeholder="Sarah" required>
                </div>

                <div class="form-section">
                    <label class="form-label">Your Name</label>
                    <input type="text" class="form-input" id="senderName" placeholder="Alex" required>
                </div>

                <div class="form-section">
                    <label class="form-label">Personal Message (Optional)</label>
                    <textarea class="form-textarea" id="personalMessage" placeholder="I was thinking of you today and wanted to send some good vibes your way..."></textarea>
                </div>

                <div class="form-section">
                    <label class="form-label">Recipient's Email (Optional)</label>
                    <input type="email" class="form-input" id="recipientEmail" placeholder="sarah@example.com">
                    <small style="color: var(--color-text-muted); font-size: 12px;">
                        Leave blank to get a shareable link instead
                    </small>
                </div>

                <div class="card-preview">
                    <div class="preview-label">Preview</div>
                    <div class="preview-affirmation" id="previewAffirmation">
                        Select an affirmation above
                    </div>
                    <div class="preview-message" id="previewMessage">
                        <span id="previewSender">Someone</span> wanted to send you some good vibes ‚ú®
                    </div>
                </div>

                <button type="submit" class="send-button" id="sendButton">
                    Create Card ‚ú®
                </button>
            </form>

            <div class="success-message" id="successMessage">
                <div class="success-icon">üéâ</div>
                <h2 class="success-title">Card Created!</h2>
                <p class="success-text">
                    Your personalized vibe check card is ready to share.
                </p>
                <div class="share-link">
                    <input type="text" id="cardLink" readonly>
                    <button class="copy-button" onclick="copyLink()">Copy</button>
                </div>
                <button class="btn btn-primary" onclick="location.reload()">
                    Send Another Card
                </button>
            </div>

            <div class="back-link">
                <a href="index.html">‚Üê Back to The Vibe Check Project</a>
            </div>
        </div>
    </div>

    <script>
        const affirmations = [
            "You're trying, and that's what counts.",
            "Your feelings are valid, and you deserve to be heard.",
            "Every new day is a fresh chance to try again.",
            "You're doing better than you think you are.",
            "Your presence makes a difference, even when you don't see it.",
            "Rest is not weakness. It's essential.",
            "It's okay to not be okay right now.",
            "You don't have to be perfect to be worthy of love.",
            "Small steps are still progress.",
            "You're allowed to take up space.",
            "Your story isn't over yet.",
            "You're stronger than you know.",
            "It's okay to ask for help.",
            "You deserve kindness, especially from yourself.",
            "Your pace is perfect for you."
        ];

        let selectedAffirmation = '';

        // Populate affirmations
        const picker = document.getElementById('affirmationPicker');
        affirmations.forEach((aff, index) => {
            const option = document.createElement('div');
            option.className = 'affirmation-option';
            option.textContent = aff;
            option.onclick = () => selectAffirmation(aff, option);
            picker.appendChild(option);
        });

        function selectAffirmation(affirmation, element) {
            selectedAffirmation = affirmation;
            
            // Remove selected class from all
            document.querySelectorAll('.affirmation-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            // Add to clicked element
            element.classList.add('selected');
            
            // Update preview
            document.getElementById('previewAffirmation').textContent = `"${affirmation}"`;
        }

        // Update preview as user types
        document.getElementById('senderName').addEventListener('input', updatePreview);
        document.getElementById('personalMessage').addEventListener('input', updatePreview);

        function updatePreview() {
            const senderName = document.getElementById('senderName').value || 'Someone';
            const personalMessage = document.getElementById('personalMessage').value;
            
            document.getElementById('previewSender').textContent = senderName;
            
            if (personalMessage) {
                document.getElementById('previewMessage').innerHTML = 
                    `<strong>${senderName}</strong> says: "${personalMessage}"`;
            } else {
                document.getElementById('previewMessage').innerHTML = 
                    `<strong>${senderName}</strong> wanted to send you some good vibes ‚ú®`;
            }
        }

        // Handle form submission
        document.getElementById('cardForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedAffirmation) {
                alert('Please select an affirmation');
                return;
            }
            
            const recipientName = document.getElementById('recipientName').value;
            const senderName = document.getElementById('senderName').value;
            const personalMessage = document.getElementById('personalMessage').value;
            const recipientEmail = document.getElementById('recipientEmail').value;
            
            // Create card data
            const cardData = {
                affirmation: selectedAffirmation,
                recipientName: recipientName,
                senderName: senderName,
                personalMessage: personalMessage,
                recipientEmail: recipientEmail,
                createdAt: new Date().toISOString()
            };
            
            // Generate unique ID
            const cardId = generateId();
            
            // Store in localStorage
            localStorage.setItem(`card_${cardId}`, JSON.stringify(cardData));
            
            // Generate shareable link
            const cardUrl = `${window.location.origin}/view-card.html?id=${cardId}`;
            
            // Show success
            document.querySelector('.card-form').style.display = 'none';
            document.getElementById('successMessage').classList.add('show');
            document.getElementById('cardLink').value = cardUrl;
            
            // TODO: If email provided, send email notification
            if (recipientEmail) {
                console.log('Would send email to:', recipientEmail);
                // Future: Integrate with email service
            }
        });

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function copyLink() {
            const input = document.getElementById('cardLink');
            input.select();
            document.execCommand('copy');
            
            const button = event.target;
            button.textContent = 'Copied!';
            setTimeout(() => {
                button.textContent = 'Copy';
            }, 2000);
        }
    </script>
</body>
</html>
