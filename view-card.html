<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Card</title>

<style>
  :root{
    --pink:#FF6B9D; --gold:#FEC84A; --bg:#251f2d;
    --paper:#ffffff; --paper2:#fbfbfb; --ink:#1A1625;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    min-height:100vh; display:flex; align-items:center; justify-content:center;
    background:radial-gradient(1200px 800px at 50% 10%, #342b3d 0%, var(--bg) 60%, #201a26 100%);
    font-family: system-ui, -apple-system, Segoe UI, Inter, Roboto, sans-serif;
    overflow-x:hidden; perspective:2200px;
  }

  /* Scene */
  .scene{width:900px; max-width:92vw; position:relative;}
  .envelope{height:360px; position:relative; transform-style:preserve-3d;}
  .env-3d{height:100%; position:relative; transform-style:preserve-3d;}

  /* Back body (holds the card) */
  .env-body{
    position:absolute; inset:0;
    background:linear-gradient(135deg, var(--pink) 0%, var(--gold) 100%);
    border-radius:14px;
    box-shadow:
      0 28px 70px rgba(0,0,0,.55),
      0 0 0 1px rgba(255,255,255,.12) inset,
      0 -6px 40px rgba(255,255,255,.12) inset;
    overflow:hidden;                    /* keeps the card inside until it slides out */
    z-index:1;
  }

  /* Front pocket mask */
  .env-front{
    position:absolute; left:0; top:47%; width:100%; height:53%;
    background:linear-gradient(135deg, #ff6b9d 0%, #fec84a 100%);
    border-radius:0 0 14px 14px;
    box-shadow:
      0 -8px 22px rgba(0,0,0,.28) inset,
      0 16px 38px rgba(0,0,0,.28);
    transform:translateZ(8px);
    z-index:8; pointer-events:none;
  }

  /* Flap */
  .env-flap{
    position:absolute; inset:0 0 45% 0;
    background:linear-gradient(135deg, #e85285 0%, #f5b82e 100%);
    border-radius:14px 14px 0 0;
    transform-origin:top center;
    transform:rotateX(0deg);
    transition:transform 1.2s cubic-bezier(.4,.2,.2,1);
    z-index:10; cursor:pointer;
    box-shadow:0 22px 50px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.15) inset;
  }
  .env-3d.open .env-flap{ transform:rotateX(-185deg) translateZ(1px); }

  /* ===== Tri-fold as ONE sheet ===== */
  .trifold{
    position:absolute; left:50%; top:100%;
    width:1020px; height:560px; margin-left:-510px;   /* full unfolded size */
    transform:translateY(10px) translateZ(-12px);     /* start barely inside */
    transform-style:preserve-3d;
    display:flex;
    transition:transform 1.4s cubic-bezier(.4,.2,.2,1) .2s;
    z-index:5; will-change:transform;
    /* one continuous paper */
    background:linear-gradient(180deg, var(--paper) 0%, var(--paper2) 100%);
    border-radius:12px; overflow:visible;
    box-shadow:0 10px 38px rgba(0,0,0,.25);
  }

  /* Fold seams drawn on the parent to unify the look */
  .trifold::before{
    content:"";
    position:absolute; inset:0;
    background:
      linear-gradient(90deg, rgba(0,0,0,.12), rgba(0,0,0,0) 12%) 33.333% / 1px 100% no-repeat,
      linear-gradient(90deg, rgba(0,0,0,.12), rgba(0,0,0,0) 12%) 66.666% / 1px 100% no-repeat;
    opacity:.35; pointer-events:none;
  }

  /* hinge shadows when open */
  .env-3d.open .trifold::after{
    content:"";
    position:absolute; inset:0;
    background:
      radial-gradient(120px 80px at 33.333% 50%, rgba(0,0,0,.18), transparent 70%) no-repeat,
      radial-gradient(120px 80px at 66.666% 50%, rgba(0,0,0,.18), transparent 70%) no-repeat;
    pointer-events:none; filter:blur(6px); opacity:.6;
  }

  /* Three panels are transparent, so the parentâ€™s paper is continuous */
  .panel{
    flex:1; position:relative; height:100%;
    background:transparent; /* critical for continuity */
    transform-style:preserve-3d;
    backface-visibility:hidden;
    padding:48px; display:flex; flex-direction:column; align-items:center; justify-content:center;
    transition:transform 1.0s cubic-bezier(.34,1.2,.56,1) .9s, box-shadow .9s ease .9s, opacity .6s ease .9s;
  }
  .panel-left{ transform-origin:right center; border-radius:12px 0 0 12px; }
  .panel-right{ transform-origin:left center;  border-radius:0 12px 12px 0; }

  /* folded state */
  .trifold.folded .panel-left{
    transform:rotateY(176deg) translateZ(2px);
    box-shadow:-12px 0 30px rgba(0,0,0,.28), inset 28px 0 55px rgba(0,0,0,.12);
    opacity:.85;
  }
  .trifold.folded .panel-right{
    transform:rotateY(-176deg) translateZ(2px);
    box-shadow:12px 0 30px rgba(0,0,0,.28), inset -28px 0 55px rgba(0,0,0,.12);
    opacity:.85;
  }

  /* OPEN state â€” slide out + unfold */
  .env-3d.open .trifold{
    transform:translateY(-320px) translateZ(60px);
  }
  .env-3d.open .panel-left{
    transform:rotateY(-10deg) translateZ(24px);
    box-shadow:8px 0 28px rgba(0,0,0,.18);
    opacity:1;
  }
  .env-3d.open .panel-mid{
    transform:translateZ(28px);
    box-shadow:0 10px 34px rgba(0,0,0,.22);
  }
  .env-3d.open .panel-right{
    transform:rotateY(10deg) translateZ(24px);
    box-shadow:-8px 0 28px rgba(0,0,0,.18);
    opacity:1;
  }

  /* Content bits */
  .to{letter-spacing:3px; color:#ff5e98; font-weight:800; font-size:12px; margin-bottom:18px;}
  .sub{color:#6b6b6b; margin-bottom:20px}
  .bigq{font-weight:800; font-size:40px; color:var(--ink); line-height:1.25; text-align:center; margin:12px 0 18px}
  .tiny{color:#7a7a7a; font-style:italic}
  .btns{display:flex; gap:14px; width:100%; margin-top:auto; flex-wrap:wrap; justify-content:center}
  .btn{padding:14px 22px; border-radius:10px; font-weight:700; cursor:pointer}
  .primary{background:linear-gradient(135deg, var(--pink), var(--gold)); color:#fff; border:none}
  .ghost{background:#fff; color:var(--pink); border:2px solid var(--pink)}

  /* Click prompt */
  .prompt{
    margin-top:28px; align-self:center;
    color:#ffd7ea; background:rgba(255,107,157,.22); padding:12px 20px; border-radius:24px;
    border:1px solid rgba(255,107,157,.38); box-shadow:0 8px 22px rgba(255,107,157,.28);
    font-weight:700
  }
  .prompt.hide{opacity:0; visibility:hidden; transition:.35s ease}

  /* Responsive */
  @media (max-width:900px){
    .envelope{height:310px}
    .trifold{width:780px; height:470px; margin-left:-390px}
  }
</style>
</head>
<body>

  <div class="scene">
    <div class="envelope">
      <div class="env-3d" id="env3d">
        <div class="env-body">
          <!-- TRI-FOLD -->
          <div class="trifold folded" id="trifold">
            <section class="panel panel-left">
              <div class="to">FOR SARAH</div>
              <div class="sub">Alex really wanted you to knowâ€¦</div>
              <div style="font-size:46px; opacity:.28">ðŸ’–</div>
            </section>
            <section class="panel panel-mid">
              <div class="bigq">You're stronger than<br/>you know.</div>
              <div class="tiny">"Hope you're doing well! Keep being amazing."</div>
            </section>
            <section class="panel panel-right">
              <div style="font-size:42px; opacity:.35; margin-bottom:34px">âœ¨</div>
              <div class="sub" style="margin-top:auto">With love, Alex</div>
              <div class="btns">
                <button class="btn primary" onclick="alert('Daily Vibe Checks')">Get Daily Vibe Checks</button>
                <button class="btn ghost" onclick="alert('Send One Too')">Send One Too</button>
              </div>
            </section>
          </div>
        </div>

        <!-- pocket overlay and flap -->
        <div class="env-front" aria-hidden="true"></div>
        <div class="env-flap" id="flap" title="Open the envelope"></div>
      </div>
    </div>
    <div class="prompt" id="prompt">ðŸ‘† Click to open your card</div>
  </div>

<script>
  const env = document.getElementById('env3d');
  const flap = document.getElementById('flap');
  const tri = document.getElementById('trifold');
  const prompt = document.getElementById('prompt');
  let opened = false;

  flap.addEventListener('click', open);
  flap.tabIndex = 0;
  flap.addEventListener('keydown', e=>{
    if(e.key==='Enter' || e.key===' '){ e.preventDefault(); open(); }
  });

  function open(){
    if(opened) return;
    opened = true;
    env.classList.add('open');
    prompt.classList.add('hide');
    // unfold a bit after the slide starts (feels like it's clearing the pocket)
    setTimeout(()=> tri.classList.remove('folded'), 650);
  }

  // Gentle auto-open if untouched
  const t = setTimeout(()=>{ if(!opened) open(); }, 4200);
  flap.addEventListener('mouseover', ()=> clearTimeout(t), {once:true});
</script>
</body>
</html>
